<div>
  <mat-list *ngIf="bots" class="cards" fxLayout="column" fxLayoutAlign="start center" fxLayoutGap="30px" fxFlex>
    <mat-list-item *ngFor="let bot of bots | slice: 0 : screenWidth < 1500 ? 5 : 6; let i = index"
      class="card" fxLayout="column" fxLayoutGap="20px" fxLayoutAlign="start" >
     <div *ngIf="bots && modules">
      <div class="open-bot-content" >
        <div (click)="openBot(bot.id!)"> <span class="card-title" fxFlex>{{ bot.name }}</span></div>
       
        <a id="story-link" [routerLink]="['/main-story', bot.id!]" class="card-title" fxFlex>
          To main story
        </a>
        <div id="mat-menu" class="card-title">
          <mat-menu #menu="matMenu">
            <button mat-menu-item (click)="openStory()" > Open </button>
            <button mat-menu-item (click)="editStory()" > Edit </button>
            <button mat-menu-item (click)="deleteStory()"> {{'ASSESSMENTS.BUTTON.DELETE' | transloco}}</button>
          </mat-menu>
        </div>
        
      </div>

      <!-- Nested list for modules -->
      <div id="stories-div">
        <div *ngFor="let filteredModule of filteredModules">
          <mat-list *ngIf="bot.id === filteredModule.modulesArr[0]?.parentBot" fxLayout="column">
            <mat-list-item *ngFor="let module of filteredModule.modulesArr">
              <span class="card-title" fxFlex>{{ module.name }}</span>
            </mat-list-item>
            <div id="new-story-div">
              <span class="card-title" fxFlex>
                <button mat-fab class="btn-add">
                  <i class="fas fa-plus"></i>
                </button>
                New Story 
              </span>
            </div>
           </mat-list>
        </div>
      </div>
      <!-- from "bot-modules-grid-view.component.html" -->
      

     </div>
     
    </mat-list-item>
  </mat-list>
</div>

