<div>
  <mat-list *ngIf="bots" class="cards" fxLayout="column" fxLayoutAlign="start center" fxLayoutGap="30px" fxFlex>
    <mat-list-item *ngFor="let bot of bots | slice: 0 : screenWidth < 1500 ? 3 : 4; let i = index"
      class="card" fxLayout="column" fxLayoutGap="20px" fxLayoutAlign="start" [fxFlex]="screenWidth < 1500 ? 32 : 25">
     <div *ngIf="bots && modules">
      <div class="open-bot-content" (click)="openBot(bot.id!)">
        <span class="card-title" fxFlex>{{ bot.name }}</span>
        <a id="story-link" [routerLink]="['/main-story', bot.id!]" class="card-title" fxFlex>
          To main story
        </a>
      </div>

      <!-- Nested list for modules -->
      <div id="stories-div">
        <div *ngFor="let filteredModule of filteredModules">
          <mat-list *ngIf="bot.id === filteredModule.modulesArr[0]?.parentBot">
            <mat-list-item *ngFor="let module of filteredModule.modulesArr">
              <span class="card-title" fxFlex>{{ module.name }}</span>
            </mat-list-item>
          </mat-list>
        </div>
      </div>

     </div>
      
    </mat-list-item>
  </mat-list>
</div>

